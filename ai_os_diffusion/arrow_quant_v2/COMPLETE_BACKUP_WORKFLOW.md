# å®Œæ•´å¤‡ä»½å’Œæ¸…ç†å·¥ä½œæµç¨‹

## æ¦‚è¿°

è¿™ä¸ªå·¥ä½œæµç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š
1. **å®Œæ•´ä»£ç å¤‡ä»½** - åˆ›å»ºé¡¹ç›®çš„å®Œæ•´å‰¯æœ¬ï¼ˆæ’é™¤ç¼–è¯‘äº§ç‰©ï¼‰
2. **æ¸…ç†å’Œ Git å¤‡ä»½** - æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¹¶æ¨é€åˆ° GitHub

---

## é˜¶æ®µ 1: å®Œæ•´ä»£ç å¤‡ä»½

### ç›®çš„
åœ¨è¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œå‰ï¼Œåˆ›å»ºé¡¹ç›®çš„å®Œæ•´æœ¬åœ°å¤‡ä»½ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚

### æ‰§è¡Œæ­¥éª¤

#### 1. è¿è¡Œå¤‡ä»½è„šæœ¬

```bash
./create_backup.sh
```

#### 2. è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **åˆ›å»ºå¤‡ä»½ç›®å½•**
   - ä½ç½®: `../arrow_quant_v2_backup_YYYYMMDD_HHMMSS/`
   - å‘½ååŒ…å«æ—¶é—´æˆ³ï¼Œé¿å…è¦†ç›–

2. **å¤åˆ¶æ‰€æœ‰æºä»£ç **
   - âœ… åŒ…å«: æºä»£ç ã€æµ‹è¯•ã€æ–‡æ¡£ã€é…ç½®ã€è„šæœ¬
   - âœ… åŒ…å«: æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶å’Œè°ƒè¯•è„šæœ¬
   - âŒ æ’é™¤: ç¼–è¯‘äº§ç‰©ã€ç¼“å­˜ã€è™šæ‹Ÿç¯å¢ƒ

3. **åˆ›å»ºå¤‡ä»½è¯´æ˜**
   - æ–‡ä»¶: `BACKUP_INFO.txt`
   - å†…å®¹: å¤‡ä»½æ—¶é—´ã€Git ä¿¡æ¯ã€ç»Ÿè®¡æ•°æ®ã€æ¢å¤æ–¹æ³•

4. **å¯é€‰å‹ç¼©**
   - è¯¢é—®æ˜¯å¦åˆ›å»º `.tar.gz` å‹ç¼©åŒ…
   - å‹ç¼©åå¯é€‰åˆ é™¤æœªå‹ç¼©ç›®å½•

#### 3. é¢„æœŸç»“æœ

```
å¤‡ä»½å®Œæˆï¼
å¤‡ä»½ä½ç½®:
  ç›®å½•: ../arrow_quant_v2_backup_20260228_171500/
  æˆ–
  å‹ç¼©åŒ…: ../arrow_quant_v2_backup_20260228_171500.tar.gz

æ€»æ–‡ä»¶æ•°: ~500-1000 ä¸ª
æ€»å¤§å°: ~50-100 MBï¼ˆæœªå‹ç¼©ï¼‰, ~10-20 MBï¼ˆå‹ç¼©ï¼‰
```

---

## é˜¶æ®µ 2: æ¸…ç†å’Œ Git å¤‡ä»½

### ç›®çš„
æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼Œæäº¤åˆ° Gitï¼Œæ¨é€åˆ° GitHubï¼Œåˆ›å»ºå¤‡ä»½æ ‡ç­¾ã€‚

### æ‰§è¡Œæ­¥éª¤

#### 1. è¿è¡Œæ¸…ç†è„šæœ¬

```bash
./cleanup_and_backup.sh
```

#### 2. è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **åˆ›å»ºå½’æ¡£ç›®å½•**
   ```
   .archive/
   â”œâ”€â”€ debug-scripts/      # è°ƒè¯•è„šæœ¬
   â”œâ”€â”€ analysis-results/   # åˆ†æç»“æœ
   â””â”€â”€ temp-docs/          # ä¸´æ—¶æ–‡æ¡£å’Œæ—¥å¿—
   ```

2. **ç§»åŠ¨ä¸´æ—¶æ–‡ä»¶**
   - 7 ä¸ªè°ƒè¯•è„šæœ¬ â†’ `.archive/debug-scripts/`
   - 3 ä¸ªåˆ†æç»“æœ â†’ `.archive/analysis-results/`
   - 2 ä¸ªä¸´æ—¶æ–‡æ¡£/æ—¥å¿— â†’ `.archive/temp-docs/`

3. **æ˜¾ç¤º Git çŠ¶æ€å¹¶è¯¢é—®ç¡®è®¤**
   - æ˜¾ç¤ºå°†è¦æäº¤çš„æ›´æ”¹
   - è¯¢é—®æ˜¯å¦ç»§ç»­

4. **æäº¤æ›´æ”¹**
   - æ·»åŠ  `.gitignore`
   - æ·»åŠ æ–°æ–‡æ¡£ï¼ˆTASK_ANALYSIS.md ç­‰ï¼‰
   - æäº¤æ¸…ç†æ›´æ”¹

5. **æ¨é€åˆ°è¿œç¨‹**
   - æ¨é€å½“å‰åˆ†æ”¯ï¼ˆåŒ…æ‹¬ä¹‹å‰æœªæ¨é€çš„ 2 ä¸ªæäº¤ï¼‰
   - è¯¢é—®ç¡®è®¤åæ‰§è¡Œ

6. **åˆ›å»ºå¤‡ä»½æ ‡ç­¾**
   - æ ‡ç­¾å: `v0.2.0-pre-optimization`
   - æ ‡ç­¾ä¿¡æ¯: "Backup before PyO3 zero-copy optimization validation"
   - æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹

#### 3. é¢„æœŸç»“æœ

```
æ¸…ç†å’Œå¤‡ä»½å®Œæˆï¼

å½’æ¡£æ–‡ä»¶ä½ç½®: .archive/
  - è°ƒè¯•è„šæœ¬: .archive/debug-scripts/
  - åˆ†æç»“æœ: .archive/analysis-results/
  - ä¸´æ—¶æ–‡æ¡£: .archive/temp-docs/

Git çŠ¶æ€:
  - å·²æäº¤æ¸…ç†æ›´æ”¹
  - å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“
  - å·²åˆ›å»ºå¤‡ä»½æ ‡ç­¾: v0.2.0-pre-optimization
```

---

## å®Œæ•´æ‰§è¡Œæµç¨‹

### æ¨èæ‰§è¡Œé¡ºåº

```bash
# 1. å®Œæ•´ä»£ç å¤‡ä»½ï¼ˆ5-10 åˆ†é’Ÿï¼‰
./create_backup.sh
# é€‰æ‹© 'y' åˆ›å»ºå‹ç¼©åŒ…
# é€‰æ‹© 'y' åˆ é™¤æœªå‹ç¼©ç›®å½•ï¼ˆèŠ‚çœç©ºé—´ï¼‰

# 2. éªŒè¯å¤‡ä»½
ls -lh ../arrow_quant_v2_backup_*.tar.gz

# 3. æ¸…ç†å’Œ Git å¤‡ä»½ï¼ˆ5-10 åˆ†é’Ÿï¼‰
./cleanup_and_backup.sh
# é€‰æ‹© 'y' æäº¤æ›´æ”¹
# é€‰æ‹© 'y' æ¨é€åˆ°è¿œç¨‹

# 4. éªŒè¯ç»“æœ
git status
git log --oneline -5
git tag -l "v0.2.0*"
```

---

## å¤‡ä»½éªŒè¯

### éªŒè¯æœ¬åœ°å¤‡ä»½

```bash
# æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
ls -lh ../arrow_quant_v2_backup_*.tar.gz

# æŸ¥çœ‹å¤‡ä»½å†…å®¹ï¼ˆä¸è§£å‹ï¼‰
tar -tzf ../arrow_quant_v2_backup_*.tar.gz | head -20

# æŸ¥çœ‹å¤‡ä»½è¯´æ˜
tar -xzf ../arrow_quant_v2_backup_*.tar.gz arrow_quant_v2_backup_*/BACKUP_INFO.txt -O
```

### éªŒè¯ Git å¤‡ä»½

```bash
# æŸ¥çœ‹è¿œç¨‹ä»“åº“çŠ¶æ€
git remote -v
git fetch origin
git status

# æŸ¥çœ‹æ ‡ç­¾
git tag -l
git show v0.2.0-pre-optimization

# æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯
git log origin/master --oneline -5
```

### éªŒè¯æ¸…ç†ç»“æœ

```bash
# æ ¹ç›®å½•åº”è¯¥æ²¡æœ‰ä¸´æ—¶æ–‡ä»¶
ls -1 *.py 2>/dev/null || echo "âœ“ No Python files in root"
ls -1 *.json 2>/dev/null || echo "âœ“ No JSON files in root"
ls -1 *.log 2>/dev/null || echo "âœ“ No log files in root"

# å½’æ¡£ç›®å½•åº”è¯¥å­˜åœ¨
ls -la .archive/
```

---

## æ¢å¤æ–¹æ³•

### ä»æœ¬åœ°å¤‡ä»½æ¢å¤

```bash
# 1. è§£å‹å¤‡ä»½
cd /Data/CascadeProjects/
tar -xzf arrow_quant_v2_backup_YYYYMMDD_HHMMSS.tar.gz

# 2. è¿›å…¥ç›®å½•
cd arrow_quant_v2_backup_YYYYMMDD_HHMMSS/

# 3. é‡æ–°æ„å»º
cargo build --release
pip install -e .

# 4. è¿è¡Œæµ‹è¯•
cargo test
pytest
```

### ä» Git æ ‡ç­¾æ¢å¤

```bash
# 1. æ£€å‡ºæ ‡ç­¾
git checkout v0.2.0-pre-optimization

# 2. åˆ›å»ºæ–°åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
git checkout -b restore-from-backup

# 3. é‡æ–°æ„å»º
cargo build --release
```

### ä»è¿œç¨‹ä»“åº“æ¢å¤

```bash
# 1. å…‹éš†ä»“åº“
git clone <repository-url> arrow_quant_v2_restored

# 2. æ£€å‡ºç‰¹å®šæ ‡ç­¾
cd arrow_quant_v2_restored
git checkout v0.2.0-pre-optimization

# 3. é‡æ–°æ„å»º
cargo build --release
pip install -e .
```

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: rsync å‘½ä»¤ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£… rsync
sudo apt-get install rsync  # Ubuntu/Debian
sudo yum install rsync       # CentOS/RHEL
```

### é—®é¢˜ 2: ç£ç›˜ç©ºé—´ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ¸…ç† Rust ç¼–è¯‘äº§ç‰©
cargo clean

# æ¸…ç† Python ç¼“å­˜
find . -type d -name "__pycache__" -exec rm -rf {} +
find . -type d -name "*.egg-info" -exec rm -rf {} +
```

### é—®é¢˜ 3: Git æ¨é€å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥è¿œç¨‹ä»“åº“
git remote -v

# æ‹‰å–æœ€æ–°æ›´æ”¹
git pull origin master --rebase

# é‡æ–°æ¨é€
git push origin master
```

### é—®é¢˜ 4: æ ‡ç­¾å·²å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v0.2.0-pre-optimization

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v0.2.0-pre-optimization

# é‡æ–°åˆ›å»ºæ ‡ç­¾
git tag -a v0.2.0-pre-optimization -m "Backup before optimization"
git push origin v0.2.0-pre-optimization
```

---

## å®‰å…¨æ£€æŸ¥æ¸…å•

åœ¨æ‰§è¡Œæ¸…ç†å‰ï¼Œç¡®è®¤ï¼š

- [ ] æœ¬åœ°å¤‡ä»½å·²åˆ›å»º
- [ ] å¤‡ä»½æ–‡ä»¶å¯ä»¥è®¿é—®
- [ ] å¤‡ä»½å¤§å°åˆç†ï¼ˆ50-100 MBï¼‰
- [ ] BACKUP_INFO.txt æ–‡ä»¶å­˜åœ¨
- [ ] Git çŠ¶æ€æ­£å¸¸ï¼ˆæ— æœªæäº¤çš„é‡è¦æ›´æ”¹ï¼‰
- [ ] è¿œç¨‹ä»“åº“å¯è®¿é—®
- [ ] æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

åœ¨æ‰§è¡Œæ¸…ç†åï¼Œç¡®è®¤ï¼š

- [ ] ä¸´æ—¶æ–‡ä»¶å·²ç§»åŠ¨åˆ° .archive/
- [ ] æ ¸å¿ƒä»£ç æ–‡ä»¶å®Œæ•´
- [ ] Git æäº¤æˆåŠŸ
- [ ] è¿œç¨‹æ¨é€æˆåŠŸ
- [ ] å¤‡ä»½æ ‡ç­¾å·²åˆ›å»º
- [ ] é¡¹ç›®ä»å¯æ­£å¸¸æ„å»º

---

## æ—¶é—´ä¼°ç®—

| æ­¥éª¤ | é¢„è®¡æ—¶é—´ |
|------|---------|
| å®Œæ•´ä»£ç å¤‡ä»½ | 5-10 åˆ†é’Ÿ |
| éªŒè¯å¤‡ä»½ | 2-3 åˆ†é’Ÿ |
| æ¸…ç†å’Œ Git å¤‡ä»½ | 5-10 åˆ†é’Ÿ |
| éªŒè¯ç»“æœ | 2-3 åˆ†é’Ÿ |
| **æ€»è®¡** | **15-25 åˆ†é’Ÿ** |

---

## ä¸‹ä¸€æ­¥

å®Œæˆå¤‡ä»½å’Œæ¸…ç†åï¼š

1. âœ… éªŒè¯æ‰€æœ‰å¤‡ä»½å®Œæˆ
2. âœ… ç¡®è®¤é¡¹ç›®å¯æ­£å¸¸æ„å»º
3. ğŸš€ å¼€å§‹æ¨è¿›å¾…å®Œæˆä»»åŠ¡

å‚è€ƒ `TASK_ANALYSIS.md` äº†è§£ä»»åŠ¡ä¼˜å…ˆçº§å’Œæ‰§è¡Œè®¡åˆ’ã€‚

---

## è”ç³»å’Œæ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
- æŸ¥çœ‹ `BACKUP_GUIDE.md` äº†è§£è¯¦ç»†æ­¥éª¤
- æŸ¥çœ‹ `CODE_CLEANUP_ANALYSIS.md` äº†è§£æ¸…ç†å†…å®¹
- æ£€æŸ¥å¤‡ä»½æ–‡ä»¶: `cat ../arrow_quant_v2_backup_*/BACKUP_INFO.txt`
- æ£€æŸ¥ Git å†å²: `git log --oneline -10`
